{% extends '_base.html' %}
{% set page_title = "Patients" %}

{% block content %}
<h2 class="mb-3">Patients</h2>
<input type="text" id="searchInput" class="form-control" placeholder="Search patients...">

<div class="table-responsive mt-3">
    <table id="patientsTable" class="table table-striped table-hover align-middle">
        <thead class="table-primary">
        <tr>
            <th>Title</th>
            <th>First Name</th>
            <th>Middle Name</th>
            <th>Last Name</th>
            <th>Phone</th>
            <th>Email</th>
        </tr>
        </thead>
        <tbody>
        {% for p in patients %}
        <tr>
            <td>{{ p.title or '' }}</td>
            <td>{{ p.first_name or '' }}</td>
            <td>{{ p.middle_name or '' }}</td>
            <td>{{ p.last_name or '' }}</td>
            <td>{{ p.phone_number or '' }}</td>
            <td>{{ p.email or '' }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
    document.getElementById("searchInput").addEventListener("input", function () {
        const query = this.value.toLowerCase();
        const rows = document.querySelectorAll("#patientsTable tbody tr");
        rows.forEach(row => {
            const visible = Array.from(row.children).some(td =>
                td.textContent.toLowerCase().includes(query)
            );
            row.style.display = visible ? "" : "none";
        });
    });
</script>
{% endblock %}
